{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\BONCHEZZ\\\\OneDrive\\\\Attachments\\\\Desktop\\\\HACKATHON\\\\frontend\\\\src\\\\pages\\\\AdminMessaging.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport './AdminMessaging.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AdminMessaging() {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [conversations, setConversations] = useState([]);\n  const [selectedStudent, setSelectedStudent] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [messageText, setMessageText] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [stats, setStats] = useState(null);\n  const messagesEndRef = useRef(null);\n\n  // Scroll to bottom of messages\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Fetch conversations on load\n  useEffect(() => {\n    if ((user === null || user === void 0 ? void 0 : user.role) === 'admin') {\n      fetchConversations();\n      fetchStats();\n      const interval = setInterval(fetchConversations, 5000); // Refresh every 5 seconds\n      return () => clearInterval(interval);\n    } else if ((user === null || user === void 0 ? void 0 : user.role) === 'student') {\n      // Initialize empty chat with admin for student\n      setSelectedStudent({\n        studentId: user.id,\n        studentName: user.name\n      });\n    }\n  }, [user]);\n  const fetchConversations = async () => {\n    try {\n      if ((user === null || user === void 0 ? void 0 : user.role) !== 'admin') return;\n      const response = await fetch('http://localhost:5000/admin/messages/all');\n      const data = await response.json();\n      if (data.success) {\n        setConversations(data.conversations);\n      }\n    } catch (error) {\n      console.error('Error fetching conversations:', error);\n    }\n  };\n  const fetchStats = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/admin/communication/stats');\n      const data = await response.json();\n      if (data.success) {\n        setStats(data.stats);\n      }\n    } catch (error) {\n      console.error('Error fetching stats:', error);\n    }\n  };\n  const loadMessages = async studentId => {\n    try {\n      setLoading(true);\n      const response = await fetch(`http://localhost:5000/admin/messages/student/${studentId}`);\n      const data = await response.json();\n      if (data.success) {\n        setMessages(data.messages);\n      }\n    } catch (error) {\n      console.error('Error loading messages:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSelectStudent = conversation => {\n    setSelectedStudent({\n      studentId: conversation.studentId,\n      studentName: conversation.studentName\n    });\n    loadMessages(conversation.studentId);\n  };\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (!messageText.trim()) return;\n    try {\n      let endpoint, payload;\n      if ((user === null || user === void 0 ? void 0 : user.role) === 'admin' && selectedStudent) {\n        // Admin sending to student\n        endpoint = '/admin/messages/send';\n        payload = {\n          studentId: selectedStudent.studentId,\n          studentName: selectedStudent.studentName,\n          message: messageText,\n          senderId: user.id,\n          senderType: 'admin'\n        };\n      } else if ((user === null || user === void 0 ? void 0 : user.role) === 'student') {\n        // Student sending to admin\n        endpoint = '/admin/messages/student-send';\n        payload = {\n          studentId: user.id,\n          studentName: user.name,\n          message: messageText\n        };\n      } else {\n        return;\n      }\n      const response = await fetch(`http://localhost:5000${endpoint}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const data = await response.json();\n      if (data.success) {\n        setMessageText('');\n        if ((user === null || user === void 0 ? void 0 : user.role) === 'admin' && selectedStudent) {\n          loadMessages(selectedStudent.studentId);\n        } else {\n          // Reload messages for student\n          setMessages([...messages, data.data]);\n        }\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n      alert('Failed to send message');\n    }\n  };\n\n  // Admin view\n  if ((user === null || user === void 0 ? void 0 : user.role) === 'admin') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-messaging\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messaging-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"conversations-sidebar\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sidebar-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\uD83D\\uDCEC Student Messages\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this), stats && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stats-badge\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-item\",\n                children: [\"\\uD83D\\uDCCA \", stats.totalStudents, \" Students\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-item\",\n                children: [\"\\uD83D\\uDCAC \", stats.totalMessages, \" Messages\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-item\",\n                children: [\"\\uD83D\\uDD14 \", stats.unreadMessages, \" Unread\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"conversations-list\",\n            children: conversations.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"no-conversations\",\n              children: \"No student messages yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 17\n            }, this) : conversations.map(conv => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `conversation-item ${(selectedStudent === null || selectedStudent === void 0 ? void 0 : selectedStudent.studentId) === conv.studentId ? 'active' : ''}`,\n              onClick: () => handleSelectStudent(conv),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"conv-avatar\",\n                children: \"\\uD83D\\uDC68\\u200D\\uD83C\\uDF93\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"conv-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"conv-header\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: conv.studentName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 177,\n                    columnNumber: 25\n                  }, this), conv.unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"unread-badge\",\n                    children: conv.unreadCount\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 179,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"conv-preview\",\n                  children: conv.lastMessage\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"conv-time\",\n                  children: new Date(conv.lastMessageTime).toLocaleTimeString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 21\n              }, this)]\n            }, conv.studentId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-main\",\n          children: selectedStudent ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: [\"\\uD83D\\uDCAC Chat with \", selectedStudent.studentName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"view-profile-btn\",\n                children: \"\\uD83D\\uDCCB View Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"messages-area\",\n              children: [loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading\",\n                children: \"Loading messages...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 21\n              }, this) : messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"no-messages\",\n                children: \"No messages yet. Start the conversation!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 21\n              }, this) : messages.map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `message ${msg.senderType === 'admin' ? 'own' : 'other'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"message-avatar\",\n                  children: msg.senderType === 'admin' ? 'üë®‚Äçüíº' : 'üë®‚Äçüéì'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"message-bubble\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"message-sender\",\n                    children: msg.senderType === 'admin' ? 'Admin' : selectedStudent.studentName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"message-text\",\n                    children: msg.message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 215,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"message-time\",\n                    children: new Date(msg.timestamp).toLocaleTimeString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 25\n                }, this)]\n              }, msg.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 23\n              }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: messagesEndRef\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              className: \"message-input-form\",\n              onSubmit: handleSendMessage,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Type your message...\",\n                value: messageText,\n                onChange: e => setMessageText(e.target.value),\n                className: \"message-input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"send-btn\",\n                children: \"\\uD83D\\uDCE4 Send\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-selection\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"placeholder-icon\",\n              children: \"\\uD83D\\uDCAC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Select a student conversation to start messaging\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Student view\n  if ((user === null || user === void 0 ? void 0 : user.role) === 'student') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"student-admin-chat\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\uD83D\\uDCAC Message Admin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Get help and communicate with the administration\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"messages-area\",\n          children: [messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-messages\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"placeholder-icon\",\n              children: \"\\uD83D\\uDC4B\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Start a conversation with the admin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }, this) : messages.map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `message ${msg.senderType === 'student' ? 'own' : 'other'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-avatar\",\n              children: msg.senderType === 'student' ? 'üë®‚Äçüéì' : 'üë®‚Äçüíº'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-bubble\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"message-sender\",\n                children: msg.senderType === 'student' ? 'You' : 'Admin'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"message-text\",\n                children: msg.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"message-time\",\n                children: new Date(msg.timestamp).toLocaleTimeString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 19\n            }, this)]\n          }, msg.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 17\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: messagesEndRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"message-input-form\",\n          onSubmit: handleSendMessage,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Type your message to admin...\",\n            value: messageText,\n            onChange: e => setMessageText(e.target.value),\n            className: \"message-input\",\n            disabled: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"send-btn\",\n            disabled: loading,\n            children: [loading ? '‚è≥' : 'üì§', \" Send\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"unauthorized\",\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"You don't have permission to access this page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 305,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminMessaging, \"YKSFMyttaz4MTwJkyTXbOAIiqs4=\", false, function () {\n  return [useAuth];\n});\n_c = AdminMessaging;\nexport default AdminMessaging;\nvar _c;\n$RefreshReg$(_c, \"AdminMessaging\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","AdminMessaging","_s","user","conversations","setConversations","selectedStudent","setSelectedStudent","messages","setMessages","messageText","setMessageText","loading","setLoading","stats","setStats","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","role","fetchConversations","fetchStats","interval","setInterval","clearInterval","studentId","id","studentName","name","response","fetch","data","json","success","error","console","loadMessages","handleSelectStudent","conversation","handleSendMessage","e","preventDefault","trim","endpoint","payload","message","senderId","senderType","method","headers","body","JSON","stringify","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","totalStudents","totalMessages","unreadMessages","length","map","conv","onClick","unreadCount","lastMessage","Date","lastMessageTime","toLocaleTimeString","msg","timestamp","ref","onSubmit","type","placeholder","value","onChange","target","disabled","_c","$RefreshReg$"],"sources":["C:/Users/BONCHEZZ/OneDrive/Attachments/Desktop/HACKATHON/frontend/src/pages/AdminMessaging.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport './AdminMessaging.css';\r\n\r\nfunction AdminMessaging() {\r\n  const { user } = useAuth();\r\n  const [conversations, setConversations] = useState([]);\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [messageText, setMessageText] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [stats, setStats] = useState(null);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  // Scroll to bottom of messages\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  // Fetch conversations on load\r\n  useEffect(() => {\r\n    if (user?.role === 'admin') {\r\n      fetchConversations();\r\n      fetchStats();\r\n      const interval = setInterval(fetchConversations, 5000); // Refresh every 5 seconds\r\n      return () => clearInterval(interval);\r\n    } else if (user?.role === 'student') {\r\n      // Initialize empty chat with admin for student\r\n      setSelectedStudent({\r\n        studentId: user.id,\r\n        studentName: user.name\r\n      });\r\n    }\r\n  }, [user]);\r\n\r\n  const fetchConversations = async () => {\r\n    try {\r\n      if (user?.role !== 'admin') return;\r\n      \r\n      const response = await fetch('http://localhost:5000/admin/messages/all');\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        setConversations(data.conversations);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching conversations:', error);\r\n    }\r\n  };\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:5000/admin/communication/stats');\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        setStats(data.stats);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching stats:', error);\r\n    }\r\n  };\r\n\r\n  const loadMessages = async (studentId) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch(`http://localhost:5000/admin/messages/student/${studentId}`);\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        setMessages(data.messages);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading messages:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSelectStudent = (conversation) => {\r\n    setSelectedStudent({\r\n      studentId: conversation.studentId,\r\n      studentName: conversation.studentName\r\n    });\r\n    loadMessages(conversation.studentId);\r\n  };\r\n\r\n  const handleSendMessage = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!messageText.trim()) return;\r\n\r\n    try {\r\n      let endpoint, payload;\r\n\r\n      if (user?.role === 'admin' && selectedStudent) {\r\n        // Admin sending to student\r\n        endpoint = '/admin/messages/send';\r\n        payload = {\r\n          studentId: selectedStudent.studentId,\r\n          studentName: selectedStudent.studentName,\r\n          message: messageText,\r\n          senderId: user.id,\r\n          senderType: 'admin'\r\n        };\r\n      } else if (user?.role === 'student') {\r\n        // Student sending to admin\r\n        endpoint = '/admin/messages/student-send';\r\n        payload = {\r\n          studentId: user.id,\r\n          studentName: user.name,\r\n          message: messageText\r\n        };\r\n      } else {\r\n        return;\r\n      }\r\n\r\n      const response = await fetch(`http://localhost:5000${endpoint}`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        setMessageText('');\r\n        \r\n        if (user?.role === 'admin' && selectedStudent) {\r\n          loadMessages(selectedStudent.studentId);\r\n        } else {\r\n          // Reload messages for student\r\n          setMessages([...messages, data.data]);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n      alert('Failed to send message');\r\n    }\r\n  };\r\n\r\n  // Admin view\r\n  if (user?.role === 'admin') {\r\n    return (\r\n      <div className=\"admin-messaging\">\r\n        <div className=\"messaging-container\">\r\n          {/* Sidebar - Conversations */}\r\n          <div className=\"conversations-sidebar\">\r\n            <div className=\"sidebar-header\">\r\n              <h2>üì¨ Student Messages</h2>\r\n              {stats && (\r\n                <div className=\"stats-badge\">\r\n                  <span className=\"stat-item\">üìä {stats.totalStudents} Students</span>\r\n                  <span className=\"stat-item\">üí¨ {stats.totalMessages} Messages</span>\r\n                  <span className=\"stat-item\">üîî {stats.unreadMessages} Unread</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"conversations-list\">\r\n              {conversations.length === 0 ? (\r\n                <div className=\"no-conversations\">No student messages yet</div>\r\n              ) : (\r\n                conversations.map((conv) => (\r\n                  <div\r\n                    key={conv.studentId}\r\n                    className={`conversation-item ${selectedStudent?.studentId === conv.studentId ? 'active' : ''}`}\r\n                    onClick={() => handleSelectStudent(conv)}\r\n                  >\r\n                    <div className=\"conv-avatar\">üë®‚Äçüéì</div>\r\n                    <div className=\"conv-content\">\r\n                      <div className=\"conv-header\">\r\n                        <h4>{conv.studentName}</h4>\r\n                        {conv.unreadCount > 0 && (\r\n                          <span className=\"unread-badge\">{conv.unreadCount}</span>\r\n                        )}\r\n                      </div>\r\n                      <p className=\"conv-preview\">{conv.lastMessage}</p>\r\n                      <small className=\"conv-time\">{new Date(conv.lastMessageTime).toLocaleTimeString()}</small>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Main Chat Area */}\r\n          <div className=\"chat-main\">\r\n            {selectedStudent ? (\r\n              <>\r\n                <div className=\"chat-header\">\r\n                  <h3>üí¨ Chat with {selectedStudent.studentName}</h3>\r\n                  <button className=\"view-profile-btn\">üìã View Profile</button>\r\n                </div>\r\n\r\n                <div className=\"messages-area\">\r\n                  {loading ? (\r\n                    <div className=\"loading\">Loading messages...</div>\r\n                  ) : messages.length === 0 ? (\r\n                    <div className=\"no-messages\">No messages yet. Start the conversation!</div>\r\n                  ) : (\r\n                    messages.map((msg) => (\r\n                      <div key={msg.id} className={`message ${msg.senderType === 'admin' ? 'own' : 'other'}`}>\r\n                        <div className=\"message-avatar\">\r\n                          {msg.senderType === 'admin' ? 'üë®‚Äçüíº' : 'üë®‚Äçüéì'}\r\n                        </div>\r\n                        <div className=\"message-bubble\">\r\n                          <p className=\"message-sender\">\r\n                            {msg.senderType === 'admin' ? 'Admin' : selectedStudent.studentName}\r\n                          </p>\r\n                          <p className=\"message-text\">{msg.message}</p>\r\n                          <small className=\"message-time\">\r\n                            {new Date(msg.timestamp).toLocaleTimeString()}\r\n                          </small>\r\n                        </div>\r\n                      </div>\r\n                    ))\r\n                  )}\r\n                  <div ref={messagesEndRef} />\r\n                </div>\r\n\r\n                <form className=\"message-input-form\" onSubmit={handleSendMessage}>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Type your message...\"\r\n                    value={messageText}\r\n                    onChange={(e) => setMessageText(e.target.value)}\r\n                    className=\"message-input\"\r\n                  />\r\n                  <button type=\"submit\" className=\"send-btn\">üì§ Send</button>\r\n                </form>\r\n              </>\r\n            ) : (\r\n              <div className=\"no-selection\">\r\n                <div className=\"placeholder-icon\">üí¨</div>\r\n                <p>Select a student conversation to start messaging</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Student view\r\n  if (user?.role === 'student') {\r\n    return (\r\n      <div className=\"student-admin-chat\">\r\n        <div className=\"chat-container\">\r\n          <div className=\"chat-header\">\r\n            <h2>üí¨ Message Admin</h2>\r\n            <p>Get help and communicate with the administration</p>\r\n          </div>\r\n\r\n          <div className=\"messages-area\">\r\n            {messages.length === 0 ? (\r\n              <div className=\"no-messages\">\r\n                <div className=\"placeholder-icon\">üëã</div>\r\n                <p>Start a conversation with the admin</p>\r\n              </div>\r\n            ) : (\r\n              messages.map((msg) => (\r\n                <div key={msg.id} className={`message ${msg.senderType === 'student' ? 'own' : 'other'}`}>\r\n                  <div className=\"message-avatar\">\r\n                    {msg.senderType === 'student' ? 'üë®‚Äçüéì' : 'üë®‚Äçüíº'}\r\n                  </div>\r\n                  <div className=\"message-bubble\">\r\n                    <p className=\"message-sender\">\r\n                      {msg.senderType === 'student' ? 'You' : 'Admin'}\r\n                    </p>\r\n                    <p className=\"message-text\">{msg.message}</p>\r\n                    <small className=\"message-time\">\r\n                      {new Date(msg.timestamp).toLocaleTimeString()}\r\n                    </small>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n\r\n          <form className=\"message-input-form\" onSubmit={handleSendMessage}>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Type your message to admin...\"\r\n              value={messageText}\r\n              onChange={(e) => setMessageText(e.target.value)}\r\n              className=\"message-input\"\r\n              disabled={loading}\r\n            />\r\n            <button type=\"submit\" className=\"send-btn\" disabled={loading}>\r\n              {loading ? '‚è≥' : 'üì§'} Send\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"unauthorized\">\r\n      <p>You don't have permission to access this page</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminMessaging;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}