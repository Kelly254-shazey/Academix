{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\BONCHEZZ\\\\OneDrive\\\\Attachments\\\\Desktop\\\\HACKATHON\\\\frontend\\\\src\\\\pages\\\\AdminMessaging.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport './AdminMessaging.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AdminMessaging() {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [conversations, setConversations] = useState([]);\n  const [selectedStudent, setSelectedStudent] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [messageText, setMessageText] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [stats, setStats] = useState(null);\n  const messagesEndRef = useRef(null);\n\n  // Scroll to bottom of messages\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Fetch conversations on load\n  useEffect(() => {\n    if ((user === null || user === void 0 ? void 0 : user.role) === 'admin') {\n      fetchConversations();\n      fetchStats();\n      const interval = setInterval(fetchConversations, 5000); // Refresh every 5 seconds\n      return () => clearInterval(interval);\n    } else if ((user === null || user === void 0 ? void 0 : user.role) === 'student') {\n      // Initialize empty chat with admin for student\n      setSelectedStudent({\n        studentId: user.id,\n        studentName: user.name\n      });\n    }\n  }, [user]);\n  const fetchConversations = async () => {\n    try {\n      if ((user === null || user === void 0 ? void 0 : user.role) !== 'admin') return;\n      const response = await fetch('http://localhost:5000/admin/messages/all', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data.success) {\n        setConversations(data.conversations || []);\n      } else {\n        console.warn('Conversations fetch returned success: false');\n      }\n    } catch (error) {\n      console.error('Error fetching conversations:', error);\n      setConversations([]);\n    }\n  };\n  const fetchStats = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/admin/communication/stats', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data.success && data.stats) {\n        setStats(data.stats);\n      }\n    } catch (error) {\n      console.error('Error fetching stats:', error);\n      setStats(null);\n    }\n  };\n  const loadMessages = async studentId => {\n    try {\n      setLoading(true);\n      if (!studentId) {\n        setMessages([]);\n        return;\n      }\n      const response = await fetch(`http://localhost:5000/admin/messages/student/${studentId}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data.success) {\n        setMessages(data.messages || []);\n      } else {\n        setMessages([]);\n      }\n    } catch (error) {\n      console.error('Error loading messages:', error);\n      setMessages([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSelectStudent = conversation => {\n    setSelectedStudent({\n      studentId: conversation.studentId,\n      studentName: conversation.studentName\n    });\n    loadMessages(conversation.studentId);\n  };\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (!messageText.trim()) return;\n    try {\n      let endpoint, payload;\n      if ((user === null || user === void 0 ? void 0 : user.role) === 'admin' && selectedStudent) {\n        // Admin sending to student\n        endpoint = '/admin/messages/send';\n        payload = {\n          studentId: selectedStudent.studentId,\n          studentName: selectedStudent.studentName,\n          message: messageText,\n          senderId: user.id,\n          senderType: 'admin'\n        };\n      } else if ((user === null || user === void 0 ? void 0 : user.role) === 'student') {\n        // Student sending to admin\n        endpoint = '/admin/messages/student-send';\n        payload = {\n          studentId: user.id,\n          studentName: user.name,\n          message: messageText\n        };\n      } else {\n        return;\n      }\n      const response = await fetch(`http://localhost:5000${endpoint}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const data = await response.json();\n      if (data.success) {\n        setMessageText('');\n        if ((user === null || user === void 0 ? void 0 : user.role) === 'admin' && selectedStudent) {\n          loadMessages(selectedStudent.studentId);\n        } else {\n          // Reload messages for student\n          setMessages([...messages, data.data]);\n        }\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n      alert('Failed to send message');\n    }\n  };\n\n  // Admin view\n  if ((user === null || user === void 0 ? void 0 : user.role) === 'admin') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-messaging\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messaging-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"conversations-sidebar\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sidebar-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\uD83D\\uDCEC Student Messages\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this), stats && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stats-badge\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-item\",\n                children: [\"\\uD83D\\uDCCA \", stats.totalStudents, \" Students\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-item\",\n                children: [\"\\uD83D\\uDCAC \", stats.totalMessages, \" Messages\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-item\",\n                children: [\"\\uD83D\\uDD14 \", stats.unreadMessages, \" Unread\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"conversations-list\",\n            children: conversations.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"no-conversations\",\n              children: \"No student messages yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 17\n            }, this) : conversations.map(conv => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `conversation-item ${(selectedStudent === null || selectedStudent === void 0 ? void 0 : selectedStudent.studentId) === conv.studentId ? 'active' : ''}`,\n              onClick: () => handleSelectStudent(conv),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"conv-avatar\",\n                children: \"\\uD83D\\uDC68\\u200D\\uD83C\\uDF93\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"conv-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"conv-header\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: conv.studentName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 213,\n                    columnNumber: 25\n                  }, this), conv.unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"unread-badge\",\n                    children: conv.unreadCount\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 215,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"conv-preview\",\n                  children: conv.lastMessage\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"conv-time\",\n                  children: new Date(conv.lastMessageTime).toLocaleTimeString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 21\n              }, this)]\n            }, conv.studentId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-main\",\n          children: selectedStudent ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: [\"\\uD83D\\uDCAC Chat with \", selectedStudent.studentName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"view-profile-btn\",\n                children: \"\\uD83D\\uDCCB View Profile\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"messages-area\",\n              children: [loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading\",\n                children: \"Loading messages...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 21\n              }, this) : messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"no-messages\",\n                children: \"No messages yet. Start the conversation!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 21\n              }, this) : messages.map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `message ${msg.senderType === 'admin' ? 'own' : 'other'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"message-avatar\",\n                  children: msg.senderType === 'admin' ? 'üë®‚Äçüíº' : 'üë®‚Äçüéì'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"message-bubble\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"message-sender\",\n                    children: msg.senderType === 'admin' ? 'Admin' : selectedStudent.studentName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"message-text\",\n                    children: msg.message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"message-time\",\n                    children: new Date(msg.timestamp).toLocaleTimeString()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 25\n                }, this)]\n              }, msg.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 23\n              }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: messagesEndRef\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              className: \"message-input-form\",\n              onSubmit: handleSendMessage,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Type your message...\",\n                value: messageText,\n                onChange: e => setMessageText(e.target.value),\n                className: \"message-input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"send-btn\",\n                children: \"\\uD83D\\uDCE4 Send\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-selection\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"placeholder-icon\",\n              children: \"\\uD83D\\uDCAC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Select a student conversation to start messaging\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Student view\n  if ((user === null || user === void 0 ? void 0 : user.role) === 'student') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"student-admin-chat\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\uD83D\\uDCAC Message Admin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Get help and communicate with the administration\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"messages-area\",\n          children: [messages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-messages\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"placeholder-icon\",\n              children: \"\\uD83D\\uDC4B\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Start a conversation with the admin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 15\n          }, this) : messages.map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `message ${msg.senderType === 'student' ? 'own' : 'other'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-avatar\",\n              children: msg.senderType === 'student' ? 'üë®‚Äçüéì' : 'üë®‚Äçüíº'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-bubble\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"message-sender\",\n                children: msg.senderType === 'student' ? 'You' : 'Admin'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"message-text\",\n                children: msg.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"message-time\",\n                children: new Date(msg.timestamp).toLocaleTimeString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 19\n            }, this)]\n          }, msg.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 17\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: messagesEndRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"message-input-form\",\n          onSubmit: handleSendMessage,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Type your message to admin...\",\n            value: messageText,\n            onChange: e => setMessageText(e.target.value),\n            className: \"message-input\",\n            disabled: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"send-btn\",\n            disabled: loading,\n            children: [loading ? '‚è≥' : 'üì§', \" Send\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"unauthorized\",\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"You don't have permission to access this page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 341,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminMessaging, \"YKSFMyttaz4MTwJkyTXbOAIiqs4=\", false, function () {\n  return [useAuth];\n});\n_c = AdminMessaging;\nexport default AdminMessaging;\nvar _c;\n$RefreshReg$(_c, \"AdminMessaging\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","AdminMessaging","_s","user","conversations","setConversations","selectedStudent","setSelectedStudent","messages","setMessages","messageText","setMessageText","loading","setLoading","stats","setStats","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","role","fetchConversations","fetchStats","interval","setInterval","clearInterval","studentId","id","studentName","name","response","fetch","method","headers","ok","Error","status","data","json","success","console","warn","error","loadMessages","handleSelectStudent","conversation","handleSendMessage","e","preventDefault","trim","endpoint","payload","message","senderId","senderType","body","JSON","stringify","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","totalStudents","totalMessages","unreadMessages","length","map","conv","onClick","unreadCount","lastMessage","Date","lastMessageTime","toLocaleTimeString","msg","timestamp","ref","onSubmit","type","placeholder","value","onChange","target","disabled","_c","$RefreshReg$"],"sources":["C:/Users/BONCHEZZ/OneDrive/Attachments/Desktop/HACKATHON/frontend/src/pages/AdminMessaging.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport './AdminMessaging.css';\r\n\r\nfunction AdminMessaging() {\r\n  const { user } = useAuth();\r\n  const [conversations, setConversations] = useState([]);\r\n  const [selectedStudent, setSelectedStudent] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [messageText, setMessageText] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [stats, setStats] = useState(null);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  // Scroll to bottom of messages\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  // Fetch conversations on load\r\n  useEffect(() => {\r\n    if (user?.role === 'admin') {\r\n      fetchConversations();\r\n      fetchStats();\r\n      const interval = setInterval(fetchConversations, 5000); // Refresh every 5 seconds\r\n      return () => clearInterval(interval);\r\n    } else if (user?.role === 'student') {\r\n      // Initialize empty chat with admin for student\r\n      setSelectedStudent({\r\n        studentId: user.id,\r\n        studentName: user.name\r\n      });\r\n    }\r\n  }, [user]);\r\n\r\n  const fetchConversations = async () => {\r\n    try {\r\n      if (user?.role !== 'admin') return;\r\n      \r\n      const response = await fetch('http://localhost:5000/admin/messages/all', {\r\n        method: 'GET',\r\n        headers: { 'Content-Type': 'application/json' }\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        setConversations(data.conversations || []);\r\n      } else {\r\n        console.warn('Conversations fetch returned success: false');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching conversations:', error);\r\n      setConversations([]);\r\n    }\r\n  };\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      const response = await fetch('http://localhost:5000/admin/communication/stats', {\r\n        method: 'GET',\r\n        headers: { 'Content-Type': 'application/json' }\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (data.success && data.stats) {\r\n        setStats(data.stats);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching stats:', error);\r\n      setStats(null);\r\n    }\r\n  };\r\n\r\n  const loadMessages = async (studentId) => {\r\n    try {\r\n      setLoading(true);\r\n      if (!studentId) {\r\n        setMessages([]);\r\n        return;\r\n      }\r\n      \r\n      const response = await fetch(`http://localhost:5000/admin/messages/student/${studentId}`, {\r\n        method: 'GET',\r\n        headers: { 'Content-Type': 'application/json' }\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        setMessages(data.messages || []);\r\n      } else {\r\n        setMessages([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading messages:', error);\r\n      setMessages([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSelectStudent = (conversation) => {\r\n    setSelectedStudent({\r\n      studentId: conversation.studentId,\r\n      studentName: conversation.studentName\r\n    });\r\n    loadMessages(conversation.studentId);\r\n  };\r\n\r\n  const handleSendMessage = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!messageText.trim()) return;\r\n\r\n    try {\r\n      let endpoint, payload;\r\n\r\n      if (user?.role === 'admin' && selectedStudent) {\r\n        // Admin sending to student\r\n        endpoint = '/admin/messages/send';\r\n        payload = {\r\n          studentId: selectedStudent.studentId,\r\n          studentName: selectedStudent.studentName,\r\n          message: messageText,\r\n          senderId: user.id,\r\n          senderType: 'admin'\r\n        };\r\n      } else if (user?.role === 'student') {\r\n        // Student sending to admin\r\n        endpoint = '/admin/messages/student-send';\r\n        payload = {\r\n          studentId: user.id,\r\n          studentName: user.name,\r\n          message: messageText\r\n        };\r\n      } else {\r\n        return;\r\n      }\r\n\r\n      const response = await fetch(`http://localhost:5000${endpoint}`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        setMessageText('');\r\n        \r\n        if (user?.role === 'admin' && selectedStudent) {\r\n          loadMessages(selectedStudent.studentId);\r\n        } else {\r\n          // Reload messages for student\r\n          setMessages([...messages, data.data]);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n      alert('Failed to send message');\r\n    }\r\n  };\r\n\r\n  // Admin view\r\n  if (user?.role === 'admin') {\r\n    return (\r\n      <div className=\"admin-messaging\">\r\n        <div className=\"messaging-container\">\r\n          {/* Sidebar - Conversations */}\r\n          <div className=\"conversations-sidebar\">\r\n            <div className=\"sidebar-header\">\r\n              <h2>üì¨ Student Messages</h2>\r\n              {stats && (\r\n                <div className=\"stats-badge\">\r\n                  <span className=\"stat-item\">üìä {stats.totalStudents} Students</span>\r\n                  <span className=\"stat-item\">üí¨ {stats.totalMessages} Messages</span>\r\n                  <span className=\"stat-item\">üîî {stats.unreadMessages} Unread</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"conversations-list\">\r\n              {conversations.length === 0 ? (\r\n                <div className=\"no-conversations\">No student messages yet</div>\r\n              ) : (\r\n                conversations.map((conv) => (\r\n                  <div\r\n                    key={conv.studentId}\r\n                    className={`conversation-item ${selectedStudent?.studentId === conv.studentId ? 'active' : ''}`}\r\n                    onClick={() => handleSelectStudent(conv)}\r\n                  >\r\n                    <div className=\"conv-avatar\">üë®‚Äçüéì</div>\r\n                    <div className=\"conv-content\">\r\n                      <div className=\"conv-header\">\r\n                        <h4>{conv.studentName}</h4>\r\n                        {conv.unreadCount > 0 && (\r\n                          <span className=\"unread-badge\">{conv.unreadCount}</span>\r\n                        )}\r\n                      </div>\r\n                      <p className=\"conv-preview\">{conv.lastMessage}</p>\r\n                      <small className=\"conv-time\">{new Date(conv.lastMessageTime).toLocaleTimeString()}</small>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Main Chat Area */}\r\n          <div className=\"chat-main\">\r\n            {selectedStudent ? (\r\n              <>\r\n                <div className=\"chat-header\">\r\n                  <h3>üí¨ Chat with {selectedStudent.studentName}</h3>\r\n                  <button className=\"view-profile-btn\">üìã View Profile</button>\r\n                </div>\r\n\r\n                <div className=\"messages-area\">\r\n                  {loading ? (\r\n                    <div className=\"loading\">Loading messages...</div>\r\n                  ) : messages.length === 0 ? (\r\n                    <div className=\"no-messages\">No messages yet. Start the conversation!</div>\r\n                  ) : (\r\n                    messages.map((msg) => (\r\n                      <div key={msg.id} className={`message ${msg.senderType === 'admin' ? 'own' : 'other'}`}>\r\n                        <div className=\"message-avatar\">\r\n                          {msg.senderType === 'admin' ? 'üë®‚Äçüíº' : 'üë®‚Äçüéì'}\r\n                        </div>\r\n                        <div className=\"message-bubble\">\r\n                          <p className=\"message-sender\">\r\n                            {msg.senderType === 'admin' ? 'Admin' : selectedStudent.studentName}\r\n                          </p>\r\n                          <p className=\"message-text\">{msg.message}</p>\r\n                          <small className=\"message-time\">\r\n                            {new Date(msg.timestamp).toLocaleTimeString()}\r\n                          </small>\r\n                        </div>\r\n                      </div>\r\n                    ))\r\n                  )}\r\n                  <div ref={messagesEndRef} />\r\n                </div>\r\n\r\n                <form className=\"message-input-form\" onSubmit={handleSendMessage}>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Type your message...\"\r\n                    value={messageText}\r\n                    onChange={(e) => setMessageText(e.target.value)}\r\n                    className=\"message-input\"\r\n                  />\r\n                  <button type=\"submit\" className=\"send-btn\">üì§ Send</button>\r\n                </form>\r\n              </>\r\n            ) : (\r\n              <div className=\"no-selection\">\r\n                <div className=\"placeholder-icon\">üí¨</div>\r\n                <p>Select a student conversation to start messaging</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Student view\r\n  if (user?.role === 'student') {\r\n    return (\r\n      <div className=\"student-admin-chat\">\r\n        <div className=\"chat-container\">\r\n          <div className=\"chat-header\">\r\n            <h2>üí¨ Message Admin</h2>\r\n            <p>Get help and communicate with the administration</p>\r\n          </div>\r\n\r\n          <div className=\"messages-area\">\r\n            {messages.length === 0 ? (\r\n              <div className=\"no-messages\">\r\n                <div className=\"placeholder-icon\">üëã</div>\r\n                <p>Start a conversation with the admin</p>\r\n              </div>\r\n            ) : (\r\n              messages.map((msg) => (\r\n                <div key={msg.id} className={`message ${msg.senderType === 'student' ? 'own' : 'other'}`}>\r\n                  <div className=\"message-avatar\">\r\n                    {msg.senderType === 'student' ? 'üë®‚Äçüéì' : 'üë®‚Äçüíº'}\r\n                  </div>\r\n                  <div className=\"message-bubble\">\r\n                    <p className=\"message-sender\">\r\n                      {msg.senderType === 'student' ? 'You' : 'Admin'}\r\n                    </p>\r\n                    <p className=\"message-text\">{msg.message}</p>\r\n                    <small className=\"message-time\">\r\n                      {new Date(msg.timestamp).toLocaleTimeString()}\r\n                    </small>\r\n                  </div>\r\n                </div>\r\n              ))\r\n            )}\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n\r\n          <form className=\"message-input-form\" onSubmit={handleSendMessage}>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Type your message to admin...\"\r\n              value={messageText}\r\n              onChange={(e) => setMessageText(e.target.value)}\r\n              className=\"message-input\"\r\n              disabled={loading}\r\n            />\r\n            <button type=\"submit\" className=\"send-btn\" disabled={loading}>\r\n              {loading ? '‚è≥' : 'üì§'} Send\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"unauthorized\">\r\n      <p>You don't have permission to access this page</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminMessaging;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}